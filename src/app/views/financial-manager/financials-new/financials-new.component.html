<div>

  <mat-vertical-stepper [linear]="false" #stepper [animationDuration]="250">

    <!--Step 1-->
    <mat-step [stepControl]="firstFormGroup">
      <ng-template matStepLabel>Detalhes</ng-template>
      <div>

        <div>
          <mat-form-field class="cls-form-field-full-width">
            <mat-label>
              Nome da conta
              <mat-icon>payments</mat-icon>
            </mat-label>
            <input matInput required="true" type="text" placeholder="Título da conta a pagar" [(ngModel)]="billName">
          </mat-form-field>
        </div>

        <div>
          <mat-form-field class="cls-form-field-full-width">
            <mat-label>
              Data de vencimento
              <mat-icon>calendar_month</mat-icon>
            </mat-label>
            <input matInput [matDatepicker]="datePicker" required="true" placeholder="Data de vencimento da conta"
              [(ngModel)]="billDueDate">
            <mat-datepicker-toggle matIconSuffix [for]="datePicker"></mat-datepicker-toggle>
            <mat-datepicker #datePicker></mat-datepicker>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field floatLabel="always" class="cls-form-field-full-width">
            <mat-label>Tipo de movimento da conta</mat-label>
            <mat-slide-toggle color="{{uiColor}}" [(ngModel)]="isCashEntry">
              <div *ngIf="isCashEntry">Entrada</div>
              <div *ngIf="!isCashEntry">Saída</div>
            </mat-slide-toggle>
            <textarea matInput hidden></textarea>

            <mat-checkbox color="{{uiColor}}" [(ngModel)]="isBillPayed" [(disabled)]="isCashEntry">
              Conta paga? {{isBillPayed == true ? 'Sim' : 'Não' }}
            </mat-checkbox>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field class="cls-form-field-full-width">
            <mat-label>
              Descrição da conta
              <mat-icon>description</mat-icon>
            </mat-label>
            <textarea matInput type="text-area" placeholder="Informações da conta a ser pagar"
              [(ngModel)]="billDescription">
            </textarea>
          </mat-form-field>
        </div>

      </div>
      <div>
        <button mat-button matStepperNext mat-raised-button color="{{uiColor}}">Próximo</button>
      </div>
    </mat-step>

    <!--Step 2-->
    <mat-step [stepControl]="secondFormGroup">
      <ng-template matStepLabel>Valores</ng-template>
      <div>

        <div>
          <mat-form-field class="cls-form-field-full-width">
            <mat-label>
              Valor total da conta
              <mat-icon>123</mat-icon>
            </mat-label>
            <input matInput required="true" type="number" placeholder="0" [(ngModel)]="billTotalValue"
              (ngModelChange)="calculateAmountValue()">
            <span matPrefix>R$&nbsp;</span>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field class="cls-form-field-full-width">
            <mat-label>
              Número de prestações
              <mat-icon>123</mat-icon>
            </mat-label>
            <input matInput [(disabled)]="isCashEntry"
              matTooltip="Informe um valor maior que um para habilitar novos campos" type=" number" placeholder="1"
              value="1" [(ngModel)]="billAmountQuantity" (ngModelChange)="calculateAmountValue()">
          </mat-form-field>
        </div>

        <div *ngIf="billAmountQuantity > 1">
          <mat-checkbox color="{{uiColor}}" [(ngModel)]="isBillValueToDivide" [(disabled)]="isCashEntry"
            (ngModelChange)="calculateAmountValue()">
            {{installmentDescription}}
          </mat-checkbox>
          <button mat-icon-button color="{{uiColor}}" aria-label="Ajuda" (click)="showHelpDialog()"
            matTooltip="Clique para obter ajuda">
            <mat-icon>help</mat-icon>
          </button>
        </div>

        <div>
          <mat-form-field class="cls-form-field-full-width">
            <mat-label>Tags</mat-label>
            <mat-chip-grid #chipGrid aria-label="Seleção de tags">
              <mat-chip-row *ngFor="let tag of listTags" (removed)="removeTag(tag)">
                {{tag}}
                <button matChipRemove [attr.aria-label]="'remove ' + tag">
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip-row>
            </mat-chip-grid>
            <input placeholder="Nova tag..." #tagInput [formControl]="tagCtrl" [matChipInputFor]="chipGrid"
              [matAutocomplete]="auto" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              (matChipInputTokenEnd)="addTag($event)">
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectTag($event)">
              <mat-option *ngFor="let tag of filteredTags | async" [value]="tag">
                {{tag}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>

      </div>
      <div>
        <button mat-button matStepperPrevious mat-stroked-button color="{{uiColor}}">Voltar</button>
        <button mat-button matStepperNext mat-raised-button color="{{uiColor}}">Próximo</button>
      </div>

    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Finalizar</ng-template>
      <!-- You are now done. -->
      Todos os campos preenchidos, basta salvar para concluir.
      <div>
        <button mat-button matStepperPrevious mat-stroked-button color="{{uiColor}}">Voltar</button>
        <button mat-button (click)="onSaveClick()" mat-raised-button color="{{uiColor}}">Finalizar</button>
      </div>
    </mat-step>

  </mat-vertical-stepper>

  <div mat-dialog-actions>
    <button mat-button mat-stroked-button color="{{uiColor}}" (click)="onExitClick()">Sair</button>
  </div>

</div>